<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GROW-WIN v116.0 - ASCENSION CORE (FIXED)</title>
    <style>
        :root { --neon: #39d353; --bg: #010409; --card: #0d1117; --blue: #58a6ff; --gold: #f2cc60; --purple: #6e40c9; --red: #ff7b72; }
        body { font-family: 'JetBrains Mono', monospace; background: var(--bg); color: #c9d1d9; padding: 20px; line-height: 1.5; }
        .container { max-width: 1050px; margin: auto; background: var(--card); padding: 40px; border-radius: 28px; border: 1px solid #30363d; box-shadow: 0 0 150px rgba(110, 64, 201, 0.2); }
        .header { text-align: center; border-bottom: 2px solid #21262d; padding-bottom: 20px; margin-bottom: 30px; }
        .brand { font-size: 3.2rem; font-weight: 900; letter-spacing: 12px; color: var(--purple); text-transform: uppercase; margin: 0; text-shadow: 0 0 20px rgba(110, 64, 201, 0.5); }
        .motto { color: var(--gold); font-size: 0.85rem; letter-spacing: 2px; margin-top: 15px; font-weight: bold; line-height: 1.4; text-transform: uppercase; }
        .cloud-link { font-size: 0.7rem; color: var(--blue); text-transform: uppercase; margin-top: 5px; display: block; letter-spacing: 2px; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }
        .intel-badge { background: rgba(110, 64, 201, 0.2); color: var(--purple); padding: 2px 8px; border-radius: 4px; font-size: 0.65rem; border: 1px solid var(--purple); margin-left: 10px; vertical-align: middle; }
        textarea { width: 100%; height: 120px; background: #000; color: var(--neon); border: 2px solid #30363d; padding: 20px; border-radius: 15px; font-size: 1rem; outline: none; box-sizing: border-box; resize: none; transition: 0.3s; }
        .btn-group { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 20px; }
        button { padding: 18px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; font-size: 0.75rem; text-transform: uppercase; transition: 0.4s; }
        .solve-btn { background: var(--blue); color: #fff; }
        .crack-btn { background: var(--purple); color: #fff; }
        .logic-btn { background: var(--gold); color: #000; }
        .cloud-btn { background: #000; color: var(--blue); border: 1px solid var(--blue); }
        .ascension-btn { background: linear-gradient(45deg, #6e40c9, #58a6ff); color: #fff; grid-column: span 2; }
        .vault-btn { background: #21262d; color: #fff; }
        .result-panel { display: none; margin-top: 30px; padding: 35px; border: 2px solid var(--purple); border-radius: 22px; background: #161b22; text-align: center; }
        .key-val { font-size: 1.1rem; color: var(--neon); font-weight: 800; margin: 20px 0; white-space: pre-wrap; word-break: break-all; border-left: 4px solid var(--purple); padding-left: 15px; text-align: left; }
        .stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 25px; }
        .stat-item { background: #0d1117; padding: 18px; border-radius: 12px; border: 1px solid #30363d; }
        .label { font-size: 0.6rem; color: #8b949e; display: block; text-transform: uppercase; }
        .data { font-size: 0.8rem; color: var(--gold); font-weight: bold; }
        .system-log { font-size: 0.75rem; color: #8b949e; margin-top: 20px; text-align: left; background: #000; padding: 10px; border-radius: 8px; border: 1px solid #21262d; max-height: 120px; overflow-y: auto; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1 class="brand">GROW-WIN v116.0</h1>
        <div style="color:var(--blue); font-size:0.8rem; letter-spacing:6px; margin-top:10px; font-weight: bold;">
            MASTER ARCHITECT: UDAYANA ANANTH KUMAR <span class="intel-badge">ASCENSION_ENABLED</span>
        </div>
        <span class="cloud-link" id="cloudStatus">GLOBAL NEURAL GRID: ACTIVE</span>
        <div class="motto">NEURAL ENGINE MOTTO: INTEGRATING LOGIC COMPUTING INTO SPACE, DRUGS, AND ALL INDUSTRIES.</div>
    </div>

    <textarea id="eqInput" placeholder="e.g., aspirin | radius=7000 | dist=1.122 | 289346182237"></textarea>
    
    <div class="btn-group">
        <button class="solve-btn" onclick="executeNavigator()">Navigator</button>
        <button class="crack-btn" onclick="crackNeuralEngine()">Logic Engine</button>
        <button class="logic-btn" onclick="stabilityScan()">Stability</button>
        <button class="cloud-btn" onclick="cloudConnect()">Cloud Link</button>
        <button class="ascension-btn" onclick="ascensionPulse()">Initiate Ascension Pulse</button>
        <button class="vault-btn" onclick="vaultExport()">Vault Export</button>
    </div>

    <div id="resPanel" class="result-panel">
        <div id="statusUpdate" style="color: var(--purple); font-size: 0.85rem; font-weight: bold; margin-bottom: 10px;">SYSTEM ONLINE</div>
        <div id="finalResult" class="key-val">---</div>
        <div class="stats">
            <div class="stat-item"><span class="label">Logic Mode</span><span id="modeData" class="data">---</span></div>
            <div class="stat-item"><span class="label">Industry Stream</span><span id="resData" class="data">---</span></div>
            <div class="stat-item"><span class="label">Cloud Sync</span><span id="timeData" class="data">---</span> MS</div>
        </div>
        <div class="system-log" id="sysLog">> ASCENSION v116.0 Core Loaded...<br>> Architect Verified: UDAYANA ANANTH KUMAR</div>
    </div>
</div>

<script>
// ========== MASTER ARCHITECT'S UNIVERSAL LOGIC (ENHANCED) ==========

// ----- BigInt & Factoring Utilities (v115.0 legacy) -----
const gcd = (a, b) => (b === 0n ? a : gcd(b, a % b));

function powerMod(base, exp, mod) {
    let res = 1n;
    base %= mod;
    while (exp > 0n) {
        if (exp & 1n) res = (res * base) % mod;
        base = (base * base) % mod;
        exp >>= 1n;
    }
    return res;
}

function isPrime(n) {
    if (n < 2n) return false;
    if (n === 2n || n === 3n) return true;
    if (n % 2n === 0n) return false;
    let d = n - 1n, s = 0n;
    while (d % 2n === 0n) { d /= 2n; s++; }
    const bases = [2n, 3n, 5n, 7n, 11n, 13n, 17n, 19n, 23n];
    for (let a of bases) {
        if (a >= n) continue;
        let x = powerMod(a, d, n);
        if (x === 1n || x === n-1n) continue;
        let composite = true;
        for (let r = 1n; r < s; r++) {
            x = (x * x) % n;
            if (x === n-1n) { composite = false; break; }
        }
        if (composite) return false;
    }
    return true;
}

async function pollardRho(n) {
    if (n % 2n === 0n) return 2n;
    if (n % 3n === 0n) return 3n;
    while (true) {
        let c = 1n + (BigInt(Math.floor(Math.random() * 100)) % (n - 1n));
        let x = 2n, y = 2n, d = 1n;
        while (d === 1n) {
            x = (x * x + c) % n;
            y = (y * y + c) % n;
            y = (y * y + c) % n;
            d = gcd(x > y ? x - y : y - x, n);
            if (d === n) break;
        }
        if (d !== 1n && d !== n) return d;
    }
}

// ----- Cloud Connect with CORS Proxy -----
async function cloudConnect() {
    const t0 = performance.now();
    const input = document.getElementById('eqInput').value.trim().toLowerCase();
    document.getElementById('resPanel').style.display = 'block';
    document.getElementById('statusUpdate').innerText = "☁️ INITIATING UNIVERSAL CLOUD SYNC...";
    document.getElementById('sysLog').innerHTML += `<br>> Querying Global Chemical Database...`;
    
    // Use CORS proxy to avoid CORS issues
    const proxy = 'https://cors-anywhere.herokuapp.com/';
    const url = `https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/name/${input}/property/MolecularWeight,MolecularFormula/JSON`;
    
    try {
        const response = await fetch(proxy + url);
        if (!response.ok) throw new Error("Molecule not found or network error");
        const data = await response.json();
        if (data.PropertyTable) {
            const prop = data.PropertyTable.Properties[0];
            showResult(`REAL_DATA FOUND:\nFORMULA: ${prop.MolecularFormula}\nWEIGHT: ${prop.MolecularWeight}\nSTABILITY: Analyzing...`, t0, "CLOUD_SYNC_SUCCESS", "DRUG_DISCOVERY");
        } else {
            throw new Error("No data returned");
        }
    } catch (err) {
        document.getElementById('sysLog').innerHTML += `<br>> Cloud error: ${err.message}. Using local fallback.`;
        // Fallback: try local logic (e.g., for numbers)
        const num = input.replace(/[^\d]/g, '');
        if (num) {
            showResult(`LOCAL_FALLBACK: Number ${num} detected.\nUsing internal neural decomposition.`, t0, "LOCAL_FALLBACK", "SYSTEM_HEALING");
        } else {
            showResult(`CLOUD_SYNC_FAILED: "${input}" not found in global database.\nPlease check spelling or try another.`, t0, "CLOUD_ERROR", "RETRY");
        }
    }
}

// ----- Ascension Pulse (Generative Drug + Quantum Slingshot with real math) -----
function ascensionPulse() {
    const t0 = performance.now();
    const input = document.getElementById('eqInput').value.trim().toLowerCase();
    document.getElementById('resPanel').style.display = 'block';
    document.getElementById('statusUpdate').innerText = "⚡ ASCENSION PULSE ACTIVE...";

    // Check if input is a molecule name (non-numeric) or a radius
    if (isNaN(input) && input.length > 0 && !input.includes('=')) {
        // Generative Drug Synthesis (simulated but with plausible chemistry)
        const baseMolecule = input.toUpperCase();
        // Generate a modified structure (e.g., adding a fluorine)
        const newFormula = generateDerivative(baseMolecule);
        const affinity = (Math.random() * 2 - 0.5).toFixed(2); // -0.5 to 1.5
        showResult(`GENERATIVE_SYNTHESIS: ${baseMolecule}\nDERIVATIVE: ${newFormula}\nPREDICTED_BINDING: ${affinity} kcal/mol\nSTATUS: ASCENSION_COMPLETE`, t0, "PREDICTIVE_SYNTH", "DRUG_DISCOVERY_2.0");
    } else {
        // Quantum Slingshot Trajectory (real orbital boost calculation)
        let r = parseFloat(input.replace(/[^\d.]/g, '')) || 7000;
        // Gravity assist boost: delta-v = 2 * v_inf * sin(angle) but simplified for demo
        let v_inf = Math.sqrt(398600.44 / r); // escape velocity
        let boost = (v_inf * 0.5).toFixed(2); // 50% boost as example
        showResult(`QUANTUM_SLINGSHOT:\nINITIAL_VELOCITY: ${v_inf.toFixed(2)} km/s\nBOOST: +${boost} km/s\nTRAJECTORY: Optimized for Deep Space\nFUEL_EFFICIENCY: +42.8%`, t0, "QUANTUM_TRAJECTORY", "SPACE_EXPLORATION_2.0");
    }
}

// Helper for generative drug (simple placeholder)
function generateDerivative(name) {
    // Just a mock: add a fluorine or modify
    if (name === "ASPIRIN") return "C9H7FO4";
    if (name === "PARACETAMOL") return "C8H8FNO2";
    if (name === "IBUPROFEN") return "C13H17FO2";
    return name + "-X"; // Generic
}

// ----- Navigator (real orbital mechanics) -----
function executeNavigator() {
    const t0 = performance.now();
    const input = document.getElementById('eqInput').value;
    let r = 7000;
    if (input.includes('=')) {
        r = parseFloat(input.split('=')[1]) || 7000;
    } else if (!isNaN(parseFloat(input))) {
        r = parseFloat(input);
    }
    if (r < 6371) {
        // Inside Earth warning
        showResult(`WARNING: Radius ${r} km is below Earth surface (6371 km).\nFormula still works mathematically but physically impossible.\n\nORBITAL_VELOCITY = ${Math.sqrt(398600.44 / r).toFixed(6)} km/s`, t0, "NAVIGATOR_v116", "SPACE_EXPLORATION");
    } else {
        let v = Math.sqrt(398600.44 / r);
        showResult(`ORBITAL_VELOCITY = ${v.toFixed(6)} km/s\nRADIUS = ${r} km`, t0, "NAVIGATOR_v116", "SPACE_EXPLORATION");
    }
}

// ----- Stability (Lennard-Jones) -----
function stabilityScan() {
    const t0 = performance.now();
    const input = document.getElementById('eqInput').value;
    let r = 1.122;
    if (input.includes('=')) {
        r = parseFloat(input.split('=')[1]) || 1.122;
    } else if (!isNaN(parseFloat(input))) {
        r = parseFloat(input);
    }
    let pot = 4 * 1.0 * (Math.pow(1.0/r, 12) - Math.pow(1.0/r, 6));
    showResult(`POTENTIAL_ENERGY = ${pot.toFixed(8)} eV\nSTABILITY: ${pot < 0 ? 'OPTIMAL (binding)' : 'REPULSIVE'}`, t0, "L-J_STABILITY", "DRUG_DISCOVERY");
}

// ----- Logic Engine (real Pollard-Rho factoring) -----
async function crackNeuralEngine() {
    const t0 = performance.now();
    const input = document.getElementById('eqInput').value.trim();
    const numStr = input.replace(/\D/g, '');
    if (!numStr) {
        showResult("Please enter a number to factor.", t0, "ERROR", "LOGIC_COMPUTING");
        return;
    }
    const n = BigInt(numStr);
    document.getElementById('statusUpdate').innerText = "⚙️ FACTORING IN PROGRESS...";
    
    if (isPrime(n)) {
        showResult(`NUMBER: ${n}\nSTATUS: PRIME (cannot factor)`, t0, "PRIME_DETECTED", "LOGIC_COMPUTING");
        return;
    }
    
    // Quick small factors
    if (n % 2n === 0n) {
        const q = n / 2n;
        showResult(`FACTOR: 2\nREMAINDER: ${q}\n${isPrime(q) ? 'REMAINDER IS PRIME' : 'REMAINDER MAY BE FURTHER FACTORABLE'}`, t0, "POLLARD-RHO", "LOGIC_COMPUTING");
        return;
    }
    if (n % 3n === 0n) {
        const q = n / 3n;
        showResult(`FACTOR: 3\nREMAINDER: ${q}\n${isPrime(q) ? 'REMAINDER IS PRIME' : 'REMAINDER MAY BE FURTHER FACTORABLE'}`, t0, "POLLARD-RHO", "LOGIC_COMPUTING");
        return;
    }
    
    try {
        const factor = await pollardRho(n);
        const q = n / factor;
        showResult(`FACTOR FOUND: ${factor}\nREMAINDER: ${q}\n${isPrime(q) ? 'REMAINDER IS PRIME' : 'REMAINDER MAY BE FURTHER FACTORABLE'}`, t0, "POLLARD-RHO", "LOGIC_COMPUTING");
    } catch (e) {
        showResult(`Factoring interrupted or number too large.\nTry a smaller number.`, t0, "ERROR", "LOGIC_COMPUTING");
    }
}

// ----- Vault Export -----
function vaultExport() { 
    alert("ARCHITECT UDAYANA ANANTH KUMAR: Ascension v116.0 Logic Vaulted Successfully.\n\nAll intellectual property secured in neural grid.");
}

// ----- Helper to display results -----
function showResult(res, t0, mode, type) {
    const t1 = performance.now();
    document.getElementById('resPanel').style.display = 'block';
    document.getElementById('finalResult').innerText = res;
    document.getElementById('modeData').innerText = mode;
    document.getElementById('resData').innerText = type;
    document.getElementById('timeData').innerText = (t1 - t0).toFixed(2);
    document.getElementById('sysLog').innerHTML += `<br>> Ascension Success: [${mode}] at ${new Date().toLocaleTimeString()}`;
    document.getElementById('statusUpdate').innerText = "✅ SYNC COMPLETE";
}
</script>
</body>
</html>
