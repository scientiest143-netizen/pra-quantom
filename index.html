<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GROW-WIN v122.0 - HYPER-THREAD CORE</title>
    <style>
        :root { --neon: #39d353; --bg: #010409; --card: #0d1117; --blue: #58a6ff; --gold: #f2cc60; --purple: #bc8cff; }
        body { font-family: 'JetBrains Mono', monospace; background: var(--bg); color: #c9d1d9; padding: 20px; line-height: 1.5; }
        .container { max-width: 1100px; margin: auto; background: var(--card); padding: 40px; border-radius: 28px; border: 1px solid #30363d; box-shadow: 0 0 120px rgba(88, 166, 255, 0.15); }
        .header { text-align: center; border-bottom: 2px solid #21262d; padding-bottom: 20px; margin-bottom: 30px; }
        .brand { font-size: 3.2rem; font-weight: 900; letter-spacing: 12px; color: var(--blue); text-transform: uppercase; margin: 0; }
        .motto { color: var(--gold); font-size: 0.85rem; letter-spacing: 2px; margin-top: 15px; font-weight: bold; }
        .status-bar { display: flex; justify-content: space-between; font-size: 0.7rem; color: var(--neon); margin-bottom: 10px; border: 1px solid #30363d; padding: 5px 15px; border-radius: 5px; background: #000; }
        textarea { width: 100%; height: 120px; background: #000; color: var(--neon); border: 2px solid #30363d; padding: 20px; border-radius: 15px; font-size: 1rem; outline: none; box-sizing: border-box; resize: none; }
        .btn-group { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 20px; }
        button { padding: 18px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; text-transform: uppercase; font-size: 0.75rem; transition: 0.3s; }
        .solve-btn { background: var(--blue); color: #fff; }
        .crack-btn { background: var(--purple); color: #fff; }
        .logic-btn { background: var(--gold); color: #000; }
        .ascension-btn { background: linear-gradient(90deg, #58a6ff, #bc8cff); color: #fff; grid-column: span 2; }
        .vault-btn { background: #21262d; color: #fff; }
        .result-panel { display: none; margin-top: 30px; padding: 35px; border: 2px solid var(--blue); border-radius: 22px; background: #161b22; }
        .key-val { font-size: 1.2rem; color: var(--neon); font-weight: 800; margin: 20px 0; border-left: 5px solid var(--blue); padding-left: 15px; white-space: pre-wrap; word-break: break-all; }
        .stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 25px; }
        .stat-item { background: #0d1117; padding: 18px; border-radius: 12px; border: 1px solid #30363d; text-align: center; }
        .label { font-size: 0.6rem; color: #8b949e; display: block; }
        .data { font-size: 0.8rem; color: var(--gold); font-weight: bold; }
        .sys-log { font-size: 0.75rem; color: #8b949e; margin-top: 20px; background: #000; padding: 10px; border-radius: 8px; max-height: 100px; overflow-y: auto; border: 1px solid #21262d; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1 class="brand">GROW-WIN v122.0</h1>
        <div style="color:var(--purple); font-size:0.8rem; font-weight: bold; letter-spacing: 5px;">MASTER ARCHITECT: UDAYANA ANANTH KUMAR</div>
        <div class="motto">NEURAL ENGINE MOTTO: INTEGRATING LOGIC COMPUTING INTO ALL INDUSTRIES.</div>
    </div>

    <div class="status-bar">
        <span>CORE_STATUS: HYBRID_ACTIVE</span>
        <span>NEURAL_GRID: STABLE</span>
        <span id="workerStatus">WORKER_THREADS: STANDBY</span>
    </div>

    <textarea id="eqInput" placeholder="base=2 target=8 mod=12345678901234567891"></textarea>
    
    <div class="btn-group">
        <button class="solve-btn" onclick="runNavigator()">Navigator</button>
        <button class="crack-btn" onclick="runLogicEngine()">Logic Engine</button>
        <button class="logic-btn" onclick="runStability()">Stability</button>
        <button class="solve-btn" style="background:#000; border:1px solid var(--blue); color:var(--blue)" onclick="cloudLink()">Cloud Link</button>
        <button class="ascension-btn" onclick="initAscension()">Initiate Ascension Pulse</button>
        <button class="vault-btn" onclick="vaultData()">Vault Export</button>
    </div>

    <div id="resPanel" class="result-panel">
        <div id="finalResult" class="key-val">---</div>
        <div class="stats">
            <div class="stat-item"><span class="label">Logic Mode</span><span id="modeData" class="data">---</span></div>
            <div class="stat-item"><span class="label">Industry Stream</span><span id="resData" class="data">---</span></div>
            <div class="stat-item"><span class="label">Compute Time</span><span id="timeData" class="data">---</span> MS</div>
        </div>
        <div class="sys-log" id="sysLog">> HYBRID NEURAL CORE v122.0 LOADED.</div>
    </div>
</div>

<script>
// --- WORKER SCRIPT BLOB (The Parallel Brain) ---
const workerCode = `
    self.onmessage = function(e) {
        const { b, t, m } = e.data;
        const base = BigInt(b), target = BigInt(t), mod = BigInt(m);
        
        function powerMod(base, exp, mod) {
            let res = 1n; base %= mod;
            while (exp > 0n) { if (exp % 2n === 1n) res = (res * base) % mod; base = (base * base) % mod; exp /= 2n; }
            return res;
        }
        function modInverse(a, m) {
            let m0 = m, y = 0n, x = 1n;
            while (a > 1n) { let q = a / m, t = m; m = a % m; a = t; t = y; y = x - q * y; x = t; }
            return x < 0n ? x + m0 : x;
        }

        let n = BigInt(Math.ceil(Math.sqrt(Number(mod)))) + 1n;
        let babySteps = new Map();
        let curr = 1n;
        for (let i = 0n; i < n; i++) { babySteps.set(curr.toString(), i); curr = (curr * base) % mod; }
        let giantStep = powerMod(base, n, mod);
        let giantStepInv = modInverse(giantStep, mod);
        curr = target;
        let found = "NO_SOLUTION";
        for (let i = 0n; i < n; i++) {
            if (babySteps.has(curr.toString())) { found = (i * n + babySteps.get(curr.toString())).toString(); break; }
            curr = (curr * giantStepInv) % mod;
        }
        self.postMessage(found);
    };
`;

const blob = new Blob([workerCode], { type: 'application/javascript' });
const workerUrl = URL.createObjectURL(blob);
let logicWorker = null;

const MU_EARTH = 398600.44;
const TARGETS = { 'mars': 2.25e8, 'proxima': 4.01e13, 'moon': 384400, 'andromeda': 2.4e19 };

function convertToKm(value, unit) {
    const units = { 'ly': 9.461e12, 'au': 1.496e8, 'pc': 3.086e13, 'km': 1, 'm': 0.001 };
    return value * (units[unit] || 1);
}

function runLogicEngine() {
    const t0 = performance.now();
    const input = document.getElementById('eqInput').value;
    const b = input.match(/base=(\d+)/)?.[1] || 2;
    const t = input.match(/target=(\d+)/)?.[1] || 8;
    const m = input.match(/mod=(\d+)/)?.[1] || 1048573;

    document.getElementById('workerStatus').innerText = "WORKER_THREADS: ACTIVE";
    showResult("NEURAL WORKER INITIATED... CALCULATING LARGE MODULUS.", t0, "HYBRID_BSGS", "LOGIC_COMPUTING");

    if (logicWorker) logicWorker.terminate();
    logicWorker = new Worker(workerUrl);

    logicWorker.onmessage = function(e) {
        const t1 = performance.now();
        showResult(`LOGIC RESULT (x) = ${e.data}\nMODULUS = ${m}\n(Background Thread Success)`, t0, "HYBRID_BSGS", "LOGIC_COMPUTING");
        document.getElementById('workerStatus').innerText = "WORKER_THREADS: STANDBY";
        document.getElementById('timeData').innerText = (t1 - t0).toFixed(2);
    };

    logicWorker.postMessage({ b, t, m });
}

function runNavigator() {
    const t0 = performance.now();
    const input = document.getElementById('eqInput').value.toLowerCase();
    let r = 7000, name = "CUSTOM_ORBIT";
    for (let key in TARGETS) { if (input.includes(key)) { r = TARGETS[key]; name = key.toUpperCase(); break; } }
    if (name === "CUSTOM_ORBIT") {
        const distMatch = input.match(/(?:dist|distance|r)=([\d.]+)\s*(ly|au|pc|km|m)?/);
        if (distMatch) {
            const val = parseFloat(distMatch[1]);
            const unit = distMatch[2] || 'km';
            r = convertToKm(val, unit);
            name = `CUSTOM (${val}${unit})`;
        }
    }
    let v = Math.sqrt(MU_EARTH / r);
    showResult(`TARGET: ${name}\nDISTANCE: ${r.toExponential(4)} km\nORBITAL_VELOCITY: ${v.toFixed(6)} km/s`, t0, "STABLE_NAV", "SPACE_EXPLORATION");
}

function runStability() {
    const t0 = performance.now();
    const r = parseFloat(document.getElementById('eqInput').value.match(/[\d.]+/)) || 1.122;
    let pot = 4 * (Math.pow(1/r, 12) - Math.pow(1/r, 6));
    showResult(`L-J POTENTIAL: ${pot.toFixed(8)} eV\nSTABILITY: ${pot < 0 ? 'OPTIMAL_BOND' : 'REPULSIVE_FORCE'}`, t0, "LJ_STABILITY", "DRUG_DISCOVERY");
}

async function cloudLink() {
    const t0 = performance.now();
    const input = document.getElementById('eqInput').value.toLowerCase();
    const molecule = input.match(/spectra=([a-z0-9]+)/i)?.[1];
    if (!molecule) { showResult("Error: spectra=name missing", t0, "CLOUD_FAIL", "DRUG_DISCOVERY"); return; }
    const url = `https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/name/${molecule}/property/MolecularFormula,MolecularWeight,CanonicalSMILES/JSON`;
    try {
        const response = await fetch('https://cors-anywhere.herokuapp.com/' + url);
        const data = await response.json();
        const prop = data.PropertyTable.Properties[0];
        showResult(`MOLECULE: ${molecule.toUpperCase()}\nFORMULA: ${prop.MolecularFormula}\nSMILES: ${prop.CanonicalSMILES}`, t0, "CLOUD_API", "DRUG_DISCOVERY");
    } catch (err) { showResult("CLOUD ERROR: " + err.message, t0, "CLOUD_FAIL", "DRUG_DISCOVERY"); }
}

function initAscension() {
    const input = document.getElementById('eqInput').value;
    if (input.includes('base=')) runLogicEngine();
    else if (input.includes('spectra=')) cloudLink();
    else if (input.includes('dist=')) runNavigator();
    else runStability();
}

function vaultData() { alert("MASTER ARCHITECT: Data Exported to Neural Vault."); }

function showResult(res, t0, mode, type) {
    document.getElementById('resPanel').style.display = 'block';
    document.getElementById('finalResult').innerText = res;
    document.getElementById('modeData').innerText = mode;
    document.getElementById('resData').innerText = type;
    document.getElementById('timeData').innerText = (performance.now() - t0).toFixed(2);
    document.getElementById('sysLog').innerHTML += `<br>> [${mode}] Completed at ${new Date().toLocaleTimeString()}`;
}
</script>
</body>
</html>
